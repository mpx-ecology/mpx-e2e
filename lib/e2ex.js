var P=Object.defineProperty;var h=t=>P(t,"__esModule",{value:!0});var M=(t,n)=>{h(t);for(var a in n)P(t,a,{get:n[a],enumerable:!0})};var r=(t,n,a)=>new Promise((i,m)=>{var y=e=>{try{o(a.next(e))}catch(u){m(u)}},p=e=>{try{o(a.throw(e))}catch(u){m(u)}},o=e=>e.done?i(e.value):Promise.resolve(e.value).then(y,p);o((a=a.apply(t,n)).next())});M(exports,{$:()=>W,consoleWxml:()=>$,getCurPage:()=>l,getCurPagePath:()=>f,init:()=>E,wait:()=>d});var g,c;function E(t){return r(this,null,function*(){g=t,yield g.exposeFunction("onPageReady",n=>{console.log(n,"\u7ECF\u8FC7\u7684path"),c.path===n&&(console.log(n,"\u547D\u4E2Dpath"),c.resolve(n),c.path="")})})}function d(t,n){return r(this,null,function*(){yield new Promise((a,i)=>r(this,null,function*(){if(console.log(t,"\u671F\u671B\u8FDB\u5165\u7684path"),(yield f())===t)return a(t);c={path:t,resolve:a},n&&setTimeout(i,n)}))})}function W(t,n,a){return r(this,null,function*(){if(!a)return yield t.$(n);let i=a.split(/\/|-/);return yield x(t,i,n)})}function x(m,y,p){return r(this,arguments,function*(t,n,a,i=[]){function o(){return r(this,null,function*(){return new Promise((e,u)=>r(this,null,function*(){i.unshift(n.pop());let w="."+i.join("-")+"--"+a,s=yield t.$(w);return!s&&!n.length?u(null):s?e(s):o().then(e)}))})}return yield o()})}function l(){return r(this,arguments,function*(t=g){return yield t.currentPage()})}function f(){return r(this,arguments,function*(t=g){let n=yield l(t);return n?n.path:"error"})}function $(t){t&&t.wxml().then(n=>console.log(n))}0&&(module.exports={$,consoleWxml,getCurPage,getCurPagePath,init,wait});
